// SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
/*
 * IPQ9574 AL03-C1 board device tree source
 *
 * Copyright (c) 2020-2021 The Linux Foundation. All rights reserved.
 * Copyright (c) 2022 Qualcomm Innovation Center, Inc. All rights reserved.
 */

/dts-v1/;

#include "ipq9574.dtsi"
#include "ipq9574-wkk-default-memory.dtsi"
#include "ipq9574-cpu.dtsi"

/ {
	#address-cells = <0x2>;
	#size-cells = <0x2>;
	model = "Qualcomm Technologies, Inc. IPQ9574/AP-AL03-C1";
	compatible = "qcom,ipq9574-ap-al03-c1", "qcom,ipq9574-al03", "qcom,ipq9574";
	interrupt-parent = <&intc>;

	aliases {
		serial0 = &blsp1_uart2;
	};

	chosen {
		stdout-path = "serial0";
		bootargs-append = " clk_ignore_unused";
	};

	soc {
		pinctrl@1000000 {
			blsp1_uart2_pins: blsp1_uart2_pinmux {
				pins = "gpio34", "gpio35";
				function = "blsp2_uart";
				drive-strength = <8>;
				bias-disable;
			};

			leds_pins: leds_pinmux {
				led0_2g {
					pins = "gpio64";
					function = "gpio";
					drive-strength = <8>;
					bias-pull-up;
				};
			};

			qspi_nand_pins: qspi_nand_pins {
				qspi_clock {
					pins = "gpio5";
					function = "qspi_clk";
					drive-strength = <8>;
					bias-disable;
				};

				qspi_cs {
					pins = "gpio4";
					function = "qspi_cs";
					drive-strength = <8>;
					bias-disable;
				};

				qspi_data {
					pins = "gpio0", "gpio1", "gpio2", "gpio3";
					function = "qspi_data";
					drive-strength = <8>;
					bias-disable;
				};
			};

			spi_0_pins: spi-0-pins {
				pins = "gpio11", "gpio12", "gpio13", "gpio14";
				function = "blsp0_spi";
				drive-strength = <8>;
				bias-disable;
			};

			i2c_3_pins: i2c-3-pins {
				pins = "gpio15", "gpio16";
				function = "blsp3_i2c";
				drive-strength = <8>;
				bias-disable;
			};

			mdio_pins: mdio_pinmux {
				mux_0 {
					pins = "gpio38";
					function = "mdc";
					drive-strength = <8>;
					bias-disable;
				};
				mux_1 {
					pins = "gpio39";
					function = "mdio";
					drive-strength = <8>;
					bias-pull-up;
				};
			};

			button_pins: button_pins {
				wps_button {
					pins = "gpio37";
					function = "gpio";
					drive-strength = <8>;
					bias-pull-up;
				};
			};
		};

		blsp1_uart2: serial@78b1000 {
			pinctrl-0 = <&blsp1_uart2_pins>;
			pinctrl-names = "default";
			status = "ok";
		};

		nss0: nss@40000000 {
			npu-supply = <&dummy_reg>;
			mx-supply = <&dummy_reg>;
		};

		rpm-glink {
			status = "disabled";
		};

		qpic_bam: dma@7984000 {
			status = "ok";
		};

		qpic_nand: nand@79b0000 {
			status = "ok";
			pinctrl-0 = <&qspi_nand_pins>;
			pinctrl-names = "default";
			qcom,io_macro_max_clk = <320000000>;
			qcom,io_macro_clk_rates = <24000000 100000000 200000000 \
						  320000000>;
			nand@0 {
				reg = <0>;
				#address-cells = <1>;
				#size-cells = <1>;

				nand-ecc-strength = <4>;
				nand-ecc-step-size = <512>;
				nand-bus-width = <8>;
			};
		};

		spi_0: spi@78b5000 { /* BLSP1 QUP0 */
			status = "ok";
			pinctrl-0 = <&spi_0_pins>;
			pinctrl-names = "default";
			cs-select = <0>;

			m25p80@0 {
				compatible = "n25q128a11";
				#address-cells = <1>;
				#size-cells = <1>;
				reg = <0>;
				spi-max-frequency = <50000000>;
			};
		};

		eud: qcom,msm-eud {
			status = "ok";
		};

		usb: usb3@8A00000 {
			status = "ok";
		};

		qusb_phy_0: qusb@7B000 {
			status = "ok";
		};

		ssphy_0: ssphy@7D000 {
			status = "ok";
		};

		leds {
			compatible = "gpio-leds";
			pinctrl-0 = <&leds_pins>;
			pinctrl-names = "default";
			led@64 {
				label = "led0_2g";
				gpios = <&tlmm 64 GPIO_ACTIVE_LOW>;
				linux,default-trigger = "led_2g";
				default-state = "off";
			};
		};

		pcie0_x1: pci@28000000 {
			perst-gpio = <&tlmm 23 1>;
			status = "ok";
			pcie0_rp {
				reg = <0 0 0 0 0>;

				qcom,mhi@0 {
					reg = <0 0 0 0 0>;
					qrtr_node_id = <0x30>;
#if defined(__CNSS2__)
					memory-region = <0>,<&mhi_region0>;
#endif
				};
			};
		};

		pcie0_phy: phy@84000 {
			status = "ok";
		};

		pcie2_x2: pci@20000000 {
			perst-gpio = <&tlmm 29 1>;
			status = "ok";
			pcie2_rp {
				reg = <0 0 0 0 0>;

				qcom,mhi@1 {
					reg = <0 0 0 0 0>;
					qrtr_node_id = <0x32>;
#if defined(__CNSS2__)
					memory-region = <0>,<&mhi_region1>;
#endif
				};
			};
		};

		pcie2_phy: phy@8c000 {
			status = "ok";
		};
	};
};

&CPU0 {
        cpu0-supply = <&dummy_reg_cpu>;
};

&CPU1 {
        cpu-supply = <&dummy_reg_cpu>;
};

&CPU2 {
        cpu-supply = <&dummy_reg_cpu>;
};

&CPU3 {
        cpu-supply = <&dummy_reg_cpu>;
};

&cpus {
	cpu_opp_table: cpu_opp_table {
		/delete-node/ opp-0;
		opp-936000000 {
		      opp-microvolt = <1075000>;
		};
		opp-1104000000 {
		       opp-microvolt = <1075000>;
		};
		opp-1200000000 {
		       opp-microvolt = <1075000>;
		};
		opp-1416000000 {
		       opp-microvolt = <1075000>;
		};
		opp-1488000000 {
		       opp-microvolt = <1075000>;
		};
		opp-1608000000 {
		       opp-microvolt = <1075000>;
		};
		opp-1800000000 {
		       opp-microvolt = <1075000>;
	       };
	       opp-2208000000 {
		       opp-microvolt = <1075000>;
	       };
	};
};

&apc_apm {
	status = "disabled";
};

&apc_cpr {
	status = "disabled";
};

&npu_cpr {
	status = "disabled";
};

/* Enable the reserved memory regions of QCN9224 on PCIe0 and PCIe2*/
&qcn9224_pcie0 {
        status = "ok";
};

&mhi_region0 {
        status = "ok";
};

&qcn9224_pcie2 {
        status = "ok";
};

&mhi_region2 {
        status = "ok";
};

&mlo_global_mem {
	reg = <0x0 0x5FD00000 0x0 0xC00000>;
	status = "ok";
};

&wifi0 {
	/* Internal 2G radio is disabled */
	status = "disabled";
};

&wifi4 {
	hremote_node = <&qcn9224_pcie0>;
	board_id = <0x03>;
	firmware_name = "amss_dualmac.bin";
	status = "ok";
};

&wifi6 {
	hremote_node = <&qcn9224_pcie1>;
	board_id = <0x04>;
	status = "ok";
};
